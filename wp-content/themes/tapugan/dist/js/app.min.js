"use strict";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}(),$(function(){var n=[[2,0,0,0],[2,0,0,0],[0,0,0,0],[0,0,0,0]];$(function(){$(".game").each(function(){new t($(this))}),$(".mountains").each(function(){new o($(this))}),$(document).on("mailsent.wpcf7",function(){$(".site__content").addClass("contact-send")})});var o=function(n){var o=n,t=($("body"),o.find(".mountains__mountain")),e=o.find(".mountains__potatoes"),r=function(){o.on({mousemove:function(n){var o=(n.pageX,n.pageY);a(t,0,o,.02),a(e,0,o,.04)}})},a=function(n,o,t,e){var r="translate3d("+Math.round(o*e)+"px, "+Math.round(t*e)+"px, 0px )";n.css({transform:r})},i=function(n){r()};i()},t=function(o){var t=o,e=$(window),r=t.find(".game__item span"),a=2,i=2,f=2,c=t.find(".game__highscore dd"),u=t.find(".game__score dd"),s=t.find(".game__clear-highscore"),m=function(){e.on({keyup:function(n){var o=n.keyCode;switch(o){case 37:p();break;case 38:w();break;case 39:A();break;case 40:_()}g()}}),s.on({click:function(){return window.localStorage.clear(),location.reload(),!1}})},v=function q(){if(h()){var o=x(0,3),t=x(0,3);n[t][o]<1?n[t][o]=2:q()}},h=function(){for(var o=0;o<4;o++)for(var t=0;t<4;t++)if(0==n[t][o])return!0;d()},d=function(){i>f?alert("GAME OVER.\nCONGRATELATION YOU NEW RECORD IS: "+i):alert("GAME OVER"),n=[[2,0,0,0],[2,0,0,0],[0,0,0,0],[0,0,0,0]],i=2,k(),l(),g()},l=function(){a=localStorage.getItem("highScore")?localStorage.getItem("highScore"):2,f=a},g=function(){for(var o=0;o<4;o++)for(var t=0;t<4;t++)n[t][o]>i&&(i=n[t][o]);i>a&&(a=i),localStorage.setItem("highScore",a),u.text(i),c.text(a)},w=function(){for(var o=[],t=0,e=0;e<4;e++){for(var r=0;r<4;r++)n[r][e]>0&&(o[t]=n[r][e],t++);o=R(o,!1);for(var a=0;a<4;a++)o[a]?n[a][e]=o[a]:n[a][e]=0;S(o)}v(),k()},_=function(){for(var o=[],t=0,e=0;e<4;e++){for(var r=0;r<4;r++)n[r][e]>0&&(o[t]=n[r][e],t++);o=R(o,!0);for(var a=0;a<4;a++)o[a]?n[a][e]=o[a]:n[a][e]=0;S(o)}v(),k()},p=function(){for(var o=[],t=0,e=0;e<4;e++){for(var r=0;r<4;r++)n[e][r]>0&&(o[t]=n[e][r],t++);o=R(o,!1);for(var a=0;a<4;a++)o[a]?n[e][a]=o[a]:n[e][a]=0;S(o)}v(),k()},A=function(){for(var o=[],t=0,e=0;e<4;e++){for(var r=0;r<4;r++)n[e][r]>0&&(o[t]=n[e][r],t++);o=R(o,!0);for(var a=0;a<4;a++)o[a]?n[e][a]=o[a]:n[e][a]=0;S(o)}v(),k()},R=function(n,o){var t=[];if(n.length>1){if(o)for(var e=n.length-1;e>=0;e--)n[e]==n[e+1]&&(n[e+1]=n[e]+n[e+1],n[e]=0);else for(var e=1;e<n.length;e++)n[e]==n[e-1]&&(n[e-1]=n[e]+n[e-1],n[e]=0);for(var e=0;e<n.length;e++)n[e]>0&&(t[t.length]=n[e])}else t=n;if(o)for(;t.length<4;)t.unshift(0);else for(;t.length<4;)t.push(0);return t},S=function(n){for(var o=0;o<n.length;o++)n[o]=0},k=function(){var o=0,t=0;r.each(function(){var e=$(this);n[o][t]>0?e.text(n[o][t]):e.text(""),t<3?t++:(t=0,o++)})},x=function(n,o){return Math.floor(Math.random()*(o-n+1))+n},E=function(){k(),m(),l(),g()};E()}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJyZXF1ZXN0QW5pbUZyYW1lIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwib1JlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiY2FsbGJhY2siLCJzZXRUaW1lb3V0IiwiJCIsImdhbWVGaWVsZCIsImVhY2giLCJHYW1lIiwidGhpcyIsIk1vdW50YWlucyIsImRvY3VtZW50Iiwib24iLCJhZGRDbGFzcyIsIm9iaiIsIl9vYmoiLCJfbW91bnRhaW4iLCJmaW5kIiwiX3BvdGF0b2VzIiwiX2FkZEV2ZW50cyIsIm1vdXNlbW92ZSIsImUiLCJ5IiwicGFnZVgiLCJwYWdlWSIsIl9wYXJhbGF4IiwiZWxlbSIsIngiLCJrb2VmIiwidHJhbnNsYXRlIiwiTWF0aCIsInJvdW5kIiwiY3NzIiwidHJhbnNmb3JtIiwiX2luaXQiLCJfd2luZG93IiwiX2l0ZW1zIiwiX2hpZ2hTY29yZSIsIl9zY29yZSIsIl9vbGRIaWdoU2NvcmUiLCJfaGlnaFNjb3JlRmllbGQiLCJfc2NvcmVGaWVsZCIsIl9idG5DbGVhckhpZ2hTY29yZSIsImtleXVwIiwia2V5Q29kZSIsIl9sZWZ0IiwiX3RvcCIsIl9yaWdodCIsIl9ib3R0b20iLCJfZWRpdFNjb3JlIiwiY2xpY2siLCJsb2NhbFN0b3JhZ2UiLCJjbGVhciIsImxvY2F0aW9uIiwicmVsb2FkIiwiX2FkZGVkRWxlbSIsIl9jYW5FbGVtIiwiY29sIiwiX2dldFJhbmRvbUludCIsInJvdyIsIl9nYW1lT3ZlciIsImFsZXJ0IiwiX2NyZWF0ZUZpZWxkIiwiX2luc3BlY3Rpb25TY29yZSIsImdldEl0ZW0iLCJzZXRJdGVtIiwidGV4dCIsInRtcCIsImsiLCJfc3VtbSIsImkiLCJfY2xlYXIiLCJhcnIiLCJyZXZlcnQiLCJyZXNBcnIiLCJsZW5ndGgi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S0YsR0FBTUUsRUFBS0YsRUFBSSxHQUNuQ0UsRUFBS0YsR0FBTSxPQU9uQixLQUFNLEdBQUlBLEdBQUksRUFBR0EsRUFBSUUsRUFBSUcsT0FBUUwsSUFFeEJFLEVBQUtGLElBQU9FLEVBQUtGLEVBQUksS0FDdEJFLEVBQUtGLEVBQUksR0FBTUUsRUFBS0YsR0FBTUUsRUFBS0YsRUFBSSxHQUNuQ0UsRUFBS0YsR0FBTSxFQU12QixLQUFNLEdBQUlBLEdBQUksRUFBR0EsRUFBSUUsRUFBSUcsT0FBUUwsSUFFeEJFLEVBQUtGLEdBQU0sSUFDWkksRUFBUUEsRUFBT0MsUUFBV0gsRUFBS0YsUUFJdkNJLEdBQVNGLENBR2IsSUFBS0MsRUFDRCxLQUFRQyxFQUFPQyxPQUFTLEdBQ3BCRCxFQUFPRSxRQUFTLE9BR3BCLE1BQVFGLEVBQU9DLE9BQVMsR0FDcEJELEVBQU9HLEtBQU0sRUFJckIsT0FBT0gsSUFFWEgsRUFBUyxTQUFVQyxHQUVmLElBQU0sR0FBSUYsR0FBSSxFQUFHQSxFQUFJRSxFQUFJRyxPQUFRTCxJQUM3QkUsRUFBS0YsR0FBTSxHQUduQlIsRUFBZSxXQUVYLEdBQUlnQixHQUFPLEVBQ1ByQixFQUFNLENBRVZyQixHQUFPN0IsS0FBTSxXQUNULEdBQUl3RSxHQUFVMUUsRUFBR0ksS0FFWkgsR0FBV3dFLEdBQVFyQixHQUFRLEVBQzVCc0IsRUFBUWIsS0FBTTVELEVBQVd3RSxHQUFRckIsSUFFakNzQixFQUFRYixLQUFLLElBR1pULEVBQU0sRUFDUEEsS0FFQUEsRUFBTSxFQUNOcUIsUUFJWnBCLEVBQWdCLFNBQVVzQixFQUFLQyxHQUMzQixNQUFPbkQsTUFBS29ELE1BQU9wRCxLQUFLcUQsVUFBYUYsRUFBTUQsRUFBTSxJQUFRQSxHQXFCN0Q5QyxFQUFRLFdBQ0o0QixJQUNBM0MsSUFDQTRDLElBQ0FkLElBUVJmIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ3aW5kb3cucmVxdWVzdEFuaW1GcmFtZSA9IChmdW5jdGlvbigpe1xuICAgIHJldHVybiAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgICB8fFxuICAgICAgICB3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgIHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgfHxcbiAgICAgICAgd2luZG93Lm9SZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICB8fFxuICAgICAgICB3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgIHx8XG4gICAgICAgIGZ1bmN0aW9uKCBjYWxsYmFjayApe1xuICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoIGNhbGxiYWNrLCAxMDAwIC8gNjAgKTtcbiAgICAgICAgfTtcbn0pKCk7XG4kKGZ1bmN0aW9uKCl7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIGdhbWVGaWVsZCA9IFtcbiAgICAgICAgLy8gWzgsMiwyLDRdLFxuICAgICAgICAvLyBbNCwwLDAsMF0sXG4gICAgICAgIC8vIFsyLDAsMCwwXSxcbiAgICAgICAgLy8gWzIsMCwwLDBdXG4gICAgICAgIFsyLDAsMCwwXSxcbiAgICAgICAgWzIsMCwwLDBdLFxuICAgICAgICBbMCwwLDAsMF0sXG4gICAgICAgIFswLDAsMCwwXVxuICAgIF07XG5cbiAgICAkKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICQoJy5nYW1lJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBuZXcgR2FtZSgkKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLm1vdW50YWlucycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbmV3IE1vdW50YWlucygkKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ21haWxzZW50LndwY2Y3JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCggJy5zaXRlX19jb250ZW50JykuYWRkQ2xhc3MoICdjb250YWN0LXNlbmQnICk7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB2YXIgTW91bnRhaW5zID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggJ2JvZHknICksXG4gICAgICAgICAgICBfbW91bnRhaW4gPSBfb2JqLmZpbmQoICcubW91bnRhaW5zX19tb3VudGFpbicgKSxcbiAgICAgICAgICAgIF9wb3RhdG9lcyA9IF9vYmouZmluZCggJy5tb3VudGFpbnNfX3BvdGF0b2VzJyApO1xuXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXG4gICAgICAgIHZhciBfYWRkRXZlbnRzID0gZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIF9vYmoub24oIHtcbiAgICAgICAgICAgICAgICAnbW91c2Vtb3ZlJzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSBlLnBhZ2VYLFxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IGUucGFnZVk7XG5cbiAgICAgICAgICAgICAgICAgICAgX3BhcmFsYXgoIF9tb3VudGFpbiwgMCwgeSwgMC4wMik7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJhbGF4KCBfcG90YXRvZXMsIDAsIHksIDAuMDQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3BhcmFsYXggPSBmdW5jdGlvbiggZWxlbSwgeCwgeSwga29lZiApIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJhbnNsYXRlID0gJ3RyYW5zbGF0ZTNkKCcgKyBNYXRoLnJvdW5kKHgqa29lZikgKyAncHgsICcgKyBNYXRoLnJvdW5kKHkqa29lZikgKyAncHgsIDBweCApJztcblxuICAgICAgICAgICAgICAgIGVsZW0uY3NzKCB7XG4gICAgICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiB0cmFuc2xhdGVcbiAgICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgX2FkZEV2ZW50cygpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXG5cbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xuXG4gICAgICAgIF9pbml0KCk7XG4gICAgfTtcblxuICAgIHZhciBHYW1lID0gZnVuY3Rpb24ob2JqKSB7XG5cbiAgICAgICAgLy9wcml2YXRlIHByb3BlcnRpZXNcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXG4gICAgICAgICAgICBfaXRlbXMgPSBfb2JqLmZpbmQoICcuZ2FtZV9faXRlbSBzcGFuJyApLFxuICAgICAgICAgICAgX2FuaW1hdGlvblBpY1N0YXJ0VGltZSA9IC0xLFxuICAgICAgICAgICAgX2FuaW1hdGlvbkR1cmF0aW9uID0gMzAwMCxcbiAgICAgICAgICAgIF9oaWdoU2NvcmUgPSAyLFxuICAgICAgICAgICAgX3Njb3JlID0gMixcbiAgICAgICAgICAgIF9vbGRIaWdoU2NvcmUgPSAyLFxuICAgICAgICAgICAgX2hpZ2hTY29yZUZpZWxkID0gX29iai5maW5kKCAnLmdhbWVfX2hpZ2hzY29yZSBkZCcgKSxcbiAgICAgICAgICAgIF9zY29yZUZpZWxkID0gX29iai5maW5kKCAnLmdhbWVfX3Njb3JlIGRkJyApLFxuICAgICAgICAgICAgX2J0bkNsZWFySGlnaFNjb3JlID0gX29iai5maW5kKCAnLmdhbWVfX2NsZWFyLWhpZ2hzY29yZScgKTtcblxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICBfd2luZG93Lm9uKCB7XG4gICAgICAgICAgICAgICAgJ2tleXVwJzogZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5Q29kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbGVmdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM4OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90b3AoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfcmlnaHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYm90dG9tKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF9lZGl0U2NvcmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgX2J0bkNsZWFySGlnaFNjb3JlLm9uKCB7XG4gICAgICAgICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSApO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2FkZGVkRWxlbSA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgaWYgKCBfY2FuRWxlbSgpICkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sID0gX2dldFJhbmRvbUludCggMCwgMyApLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93ID0gX2dldFJhbmRvbUludCggMCwgMyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZ2FtZUZpZWxkWyByb3cgXVsgY29sIF0gPCAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkWyByb3cgXVsgY29sIF0gPSAyO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkZGVkRWxlbSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jYW5FbGVtID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciByb3cgPSAwOyByb3cgPCA0OyByb3crKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBnYW1lRmllbGRbIHJvdyBdWyBjb2wgXSA9PSAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2dhbWVPdmVyKCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2FtZU92ZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGlmICggX3Njb3JlID4gX29sZEhpZ2hTY29yZSApIHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoICdHQU1FIE9WRVIuXFxuQ09OR1JBVEVMQVRJT04gWU9VIE5FVyBSRUNPUkQgSVM6ICcgKyBfc2NvcmUgKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhbGVydCggJ0dBTUUgT1ZFUicgKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBnYW1lRmllbGQgPSBbXG4gICAgICAgICAgICAgICAgICAgIFsyLDAsMCwwXSxcbiAgICAgICAgICAgICAgICAgICAgWzIsMCwwLDBdLFxuICAgICAgICAgICAgICAgICAgICBbMCwwLDAsMF0sXG4gICAgICAgICAgICAgICAgICAgIFswLDAsMCwwXVxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICBfc2NvcmUgPSAyO1xuXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUZpZWxkKCk7XG4gICAgICAgICAgICAgICAgX2luc3BlY3Rpb25TY29yZSgpO1xuICAgICAgICAgICAgICAgIF9lZGl0U2NvcmUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5zcGVjdGlvblNjb3JlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSggJ2hpZ2hTY29yZScgKSApIHtcbiAgICAgICAgICAgICAgICAgICAgX2hpZ2hTY29yZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCAnaGlnaFNjb3JlJyApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF9oaWdoU2NvcmUgPSAyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfb2xkSGlnaFNjb3JlID0gX2hpZ2hTY29yZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9lZGl0U2NvcmUgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBjb2wgPSAwOyBjb2wgPCA0OyBjb2wrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgcm93ID0gMDsgcm93IDwgNDsgcm93KysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2FtZUZpZWxkWyByb3cgXVsgY29sIF0gPiBfc2NvcmUgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3Njb3JlID0gZ2FtZUZpZWxkWyByb3cgXVsgY29sIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIF9zY29yZSA+IF9oaWdoU2NvcmUgKSB7XG4gICAgICAgICAgICAgICAgICAgIF9oaWdoU2NvcmUgPSBfc2NvcmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCAnaGlnaFNjb3JlJywgX2hpZ2hTY29yZSApO1xuXG4gICAgICAgICAgICAgICAgX3Njb3JlRmllbGQudGV4dCggX3Njb3JlICk7XG4gICAgICAgICAgICAgICAgX2hpZ2hTY29yZUZpZWxkLnRleHQoIF9oaWdoU2NvcmUgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF90b3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGsgPSAwO1xuXG4gICAgICAgICAgICAgICAgZm9yICggdmFyIGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciByb3cgPSAwOyByb3cgPCA0OyByb3crKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBnYW1lRmllbGRbIHJvdyBdWyBjb2wgXSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG1wWyBrIF0gPSBnYW1lRmllbGRbIHJvdyBdWyBjb2wgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0bXAgPSBfc3VtbSggdG1wLCBmYWxzZSApO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IDQ7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0bXBbIGkgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnYW1lRmllbGRbIGkgXVsgY29sIF0gPSB0bXBbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkWyBpIF1bIGNvbCBdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIF9jbGVhciggdG1wICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgX2FkZGVkRWxlbSgpO1xuXG4gICAgICAgICAgICAgICAgX2NyZWF0ZUZpZWxkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2JvdHRvbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgayA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgY29sID0gMDsgY29sIDwgNDsgY29sKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIHJvdyA9IDA7IHJvdyA8IDQ7IHJvdysrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGdhbWVGaWVsZFsgcm93IF1bIGNvbCBdID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBbIGsgXSA9IGdhbWVGaWVsZFsgcm93IF1bIGNvbCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IF9zdW1tKCB0bXAsIHRydWUgKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCA0OyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wWyBpIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkWyBpIF1bIGNvbCBdID0gdG1wWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZFsgaSBdWyBjb2wgXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfY2xlYXIoIHRtcCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9hZGRlZEVsZW0oKTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVGaWVsZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9sZWZ0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBrID0gMDtcblxuICAgICAgICAgICAgICAgIGZvciAoIHZhciByb3cgPSAwOyByb3cgPCA0OyByb3crKyApIHtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgY29sID0gMDsgY29sIDwgNDsgY29sKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggZ2FtZUZpZWxkWyByb3cgXVsgY29sIF0gPiAwICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRtcFsgayBdID0gZ2FtZUZpZWxkWyByb3cgXVsgY29sIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaysrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdG1wID0gX3N1bW0oIHRtcCwgZmFsc2UgKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCA0OyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wWyBpIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkWyByb3cgXVsgaSBdID0gdG1wWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZFsgcm93IF1bIGkgXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfY2xlYXIoIHRtcCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9hZGRlZEVsZW0oKTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVGaWVsZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgayA9IDA7XG5cbiAgICAgICAgICAgICAgICBmb3IgKCB2YXIgcm93ID0gMDsgcm93IDwgNDsgcm93KysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICggdmFyIGNvbCA9IDA7IGNvbCA8IDQ7IGNvbCsrICkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGdhbWVGaWVsZFsgcm93IF1bIGNvbCBdID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bXBbIGsgXSA9IGdhbWVGaWVsZFsgcm93IF1bIGNvbCBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRtcCA9IF9zdW1tKCB0bXAsIHRydWUgKTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDA7IGkgPCA0OyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggdG1wWyBpIF0gKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZUZpZWxkWyByb3cgXVsgaSBdID0gdG1wWyBpIF07XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdhbWVGaWVsZFsgcm93IF1bIGkgXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBfY2xlYXIoIHRtcCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIF9hZGRlZEVsZW0oKTtcblxuICAgICAgICAgICAgICAgIF9jcmVhdGVGaWVsZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zdW1tID0gZnVuY3Rpb24oIGFyciwgcmV2ZXJ0ICkge1xuICAgICAgICAgICAgICAgIHZhciByZXNBcnIgPSBbXTtcblxuICAgICAgICAgICAgICAgIGlmICggYXJyLmxlbmd0aCA+IDEgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCByZXZlcnQgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gKCBhcnIubGVuZ3RoIC0gMSApOyBpID49IDAgOyBpLS0gKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGFyclsgaSBdID09IGFyclsgaSArIDEgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyWyBpICsgMSBdID0gYXJyWyBpIF0gKyBhcnJbIGkgKyAxIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyclsgaSBdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKCB2YXIgaSA9IDE7IGkgPCBhcnIubGVuZ3RoOyBpKysgKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGFyclsgaSBdID09IGFyclsgaSAtIDEgXSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyWyBpIC0gMSBdID0gYXJyWyBpIF0gKyBhcnJbIGkgLSAxIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyclsgaSBdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKyApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBhcnJbIGkgXSA+IDAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzQXJyWyByZXNBcnIubGVuZ3RoIF0gPSBhcnJbIGkgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc0FyciA9IGFycjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoIHJldmVydCApIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKCByZXNBcnIubGVuZ3RoIDwgNCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc0Fyci51bnNoaWZ0KCAwICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoIHJlc0Fyci5sZW5ndGggPCA0ICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzQXJyLnB1c2goIDAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXNBcnI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NsZWFyID0gZnVuY3Rpb24oIGFyciApIHtcblxuICAgICAgICAgICAgICAgIGZvciAoIHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyWyBpIF0gPSAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfY3JlYXRlRmllbGQgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgIHZhciByb3dzID0gMCxcbiAgICAgICAgICAgICAgICAgICAgY29sID0gMDtcblxuICAgICAgICAgICAgICAgIF9pdGVtcy5lYWNoKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJFbGVtID0gJCggdGhpcyApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICggZ2FtZUZpZWxkWyByb3dzIF1bIGNvbCBdID4gMCApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1ckVsZW0udGV4dCggZ2FtZUZpZWxkWyByb3dzIF1bIGNvbCBdICk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJFbGVtLnRleHQoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjb2wgPCAzICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sKys7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgcm93cysrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRSYW5kb21JbnQgPSBmdW5jdGlvbiggbWluLCBtYXggKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiAoIG1heCAtIG1pbiArIDEgKSApICsgbWluO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zdGVwID0gZnVuY3Rpb24oIHRpbWUgKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3M7XG5cbiAgICAgICAgICAgICAgICBpZiAoIF9hbmltYXRpb25QaWNTdGFydFRpbWUgPCAwICkge1xuICAgICAgICAgICAgICAgICAgICBfYW5pbWF0aW9uUGljU3RhcnRUaW1lID0gdGltZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBwcm9ncmVzcyA9ICggdGltZSAtIF9hbmltYXRpb25QaWNTdGFydFRpbWUgKSAvIF9hbmltYXRpb25EdXJhdGlvbjtcblxuICAgICAgICAgICAgICAgIGlmICggcHJvZ3Jlc3MgPiAxICkge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcyA9IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBfc3RlcCApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHByb2dyZXNzKVxuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBfY3JlYXRlRmllbGQoKTtcbiAgICAgICAgICAgICAgICBfYWRkRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgX2luc3BlY3Rpb25TY29yZSgpO1xuICAgICAgICAgICAgICAgIF9lZGl0U2NvcmUoKTtcbiAgICAgICAgICAgICAgICAvLyBfc3RlcCgwKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xuXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcblxuICAgICAgICBfaW5pdCgpO1xuICAgIH07XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
